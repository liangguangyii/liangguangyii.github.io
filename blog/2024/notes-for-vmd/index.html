<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Notes for vmd | LIANG Guangyi</title> <meta name="author" content="LIANG Guangyi"> <meta name="description" content="Ho! So many bugs and goblins in my life! "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://liangguangyii.github.io/blog/2024/notes-for-vmd/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?2ed62375d27d1acd85fb25a8d933282f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">LIANG </span>Guangyi</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/todolist/">todo list</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Notes for vmd</h1> <p class="post-meta">February 11, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/vmd"> <i class="fa-solid fa-hashtag fa-sm"></i> vmd</a>   <a href="/blog/tag/visualisation"> <i class="fa-solid fa-hashtag fa-sm"></i> Visualisation</a>     ·   <a href="/blog/category/code"> <i class="fa-solid fa-tag fa-sm"></i> code</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="molecule_number-and-rep_number">molecule_number and rep_number</h2> <p>molecule_number is the index of the molecule in the molecule list, and it is not reusued after the molecule is deleted. <strong>Thus it’s truely inconvenient when using command line, and we could use <code class="language-plaintext highlighter-rouge">top</code> to represent the molID in the bottom of the current molecule list.</strong></p> <p>rep_number is the index of the representation in the representation list, with respect to the molecule_number.</p> <h2 id="mol-command"> <code class="language-plaintext highlighter-rouge">mol</code> command</h2> <p><a href="https://www.ks.uiuc.edu/Research/vmd/current/ug/node140.html" rel="external nofollow noopener" target="_blank">mol introduction</a>, and <a href="https://www.ks.uiuc.edu/Research/vmd/current/ug/node142.html#ug:topic:molinfo" rel="external nofollow noopener" target="_blank">molinfo command</a></p> <p>subcommands:</p> <ul> <li> <code class="language-plaintext highlighter-rouge">new</code>: add new molecule from a file, if it’s blank, then it will create with no atoms.</li> <li> <code class="language-plaintext highlighter-rouge">addfile</code>: similar with <code class="language-plaintext highlighter-rouge">add</code>, except it will bind the new file and former file together, they will share with the same molID, and by using the command like <code class="language-plaintext highlighter-rouge">mol modcolor rep_ID mol_ID volume 1</code>, we could map the values of the latter file to the isosurface of the former file(where <code class="language-plaintext highlighter-rouge">1</code> is the index, start by 0, of the binding files in the molID).</li> <li> <code class="language-plaintext highlighter-rouge">delete</code> molecule_number: Delete molecule(s).</li> <li> <code class="language-plaintext highlighter-rouge">modcolor</code> rep_number molecule_number coloring_method: Change the current coloring method for the given representation in the specified molecule.</li> <li> <code class="language-plaintext highlighter-rouge">modmaterial</code> rep_number molecule_number material_name: Change the current material for the given representation in the specified molecule.</li> <li> <code class="language-plaintext highlighter-rouge">modstyle</code> rep_number molecule_number rep_style: Change the current rendering method (style) for the given representation in the specified molecule.</li> <li> <p><code class="language-plaintext highlighter-rouge">modselect</code> rep_number molecule_number select_method: Change the current selection for the given representation in the specified molecule.</p> </li> <li> <code class="language-plaintext highlighter-rouge">scaleminmax</code> molecule_number rep_number [min max / auto]: Get/set the color scale range for this rep. Normally the color scale is automatically scaled to the minimum and maximum of the corresponding range of data. This command overrides the autoscaled values with the values you specify. Omit the min and max arguments to get the current values. Use ``auto” instead of a min and max to rescale the color scale to the maximum range again.</li> </ul> <p>code to delete all molID in vmd:</p> <div class="language-tcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foreach i <span class="p">[</span>molinfo list<span class="p">]</span> <span class="p">{</span>
mol delete $i
<span class="p">}</span>
</code></pre></div></div> <h2 id="custom-colormap">Custom colormap</h2> <p>The colormap could be customized by <code class="language-plaintext highlighter-rouge">color change rgb[$i] $r $g $b</code>, and the <code class="language-plaintext highlighter-rouge">$i</code> is the index of the color in the colormap, and the <code class="language-plaintext highlighter-rouge">$r</code>, <code class="language-plaintext highlighter-rouge">$g</code>, <code class="language-plaintext highlighter-rouge">$b</code> are the RGB values of the color.</p> <div class="language-tcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proc mycolor_scale <span class="p">{}</span> <span class="p">{</span>
  set color_start <span class="p">[</span>colorinfo num<span class="p">]</span>
  display update off

  set colors<span class="p">(</span>0<span class="p">)</span> <span class="p">[</span>list 1.0 1.0 1.0<span class="p">]</span>  
  set colors<span class="p">(</span>256<span class="p">)</span> <span class="p">[</span>list 0.0 0.0 1.0<span class="p">]</span>  
  set colors<span class="p">(</span>512<span class="p">)</span> <span class="p">[</span>list 1.0 0.0 0.0<span class="p">]</span>  
  set colors<span class="p">(</span>768<span class="p">)</span> <span class="p">[</span>list 0.0 1.0 0.0<span class="p">]</span>  
    
  

  for <span class="p">{</span>set i 0<span class="p">}</span> <span class="p">{</span><span class="nv">$i</span> &lt; 1024<span class="p">}</span> <span class="p">{</span>incr i<span class="p">}</span> <span class="p">{</span>
    if <span class="p">{</span><span class="nv">$i</span> &lt; 256<span class="p">}</span> <span class="p">{</span>
      set ratio <span class="p">[</span>expr double<span class="p">(</span><span class="nv">$i</span><span class="p">)</span> / 256.0<span class="p">]</span>
      set r <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>0<span class="p">)</span> 0<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>256<span class="p">)</span> 0<span class="p">]]</span>
      set g <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>0<span class="p">)</span> 1<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>256<span class="p">)</span> 1<span class="p">]]</span>
      set b <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>0<span class="p">)</span> 2<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>256<span class="p">)</span> 2<span class="p">]]</span>
    <span class="p">}</span> elseif <span class="p">{</span><span class="nv">$i</span> &lt; 512<span class="p">}</span> <span class="p">{</span>
      set ratio <span class="p">[</span>expr double<span class="p">(</span><span class="nv">$i</span> - 256<span class="p">)</span> / 256.0<span class="p">]</span>
      set r <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>256<span class="p">)</span> 0<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>512<span class="p">)</span> 0<span class="p">]]</span>
      set g <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>256<span class="p">)</span> 1<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>512<span class="p">)</span> 1<span class="p">]]</span>
      set b <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>256<span class="p">)</span> 2<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>512<span class="p">)</span> 2<span class="p">]]</span>
    <span class="p">}</span> elseif <span class="p">{</span><span class="nv">$i</span> &lt; 768<span class="p">}</span> <span class="p">{</span>
      set ratio <span class="p">[</span>expr double<span class="p">(</span><span class="nv">$i</span> - 512<span class="p">)</span> / 256.0<span class="p">]</span>
      set r <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>512<span class="p">)</span> 0<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>768<span class="p">)</span> 0<span class="p">]]</span>
      set g <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>512<span class="p">)</span> 1<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>768<span class="p">)</span> 1<span class="p">]]</span>
      set b <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>512<span class="p">)</span> 2<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>768<span class="p">)</span> 2<span class="p">]]</span>
    <span class="p">}</span> else <span class="p">{</span>
      set ratio <span class="p">[</span>expr double<span class="p">(</span><span class="nv">$i</span> - 768<span class="p">)</span> / 255.0<span class="p">]</span>
      set r <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>768<span class="p">)</span> 0<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>0<span class="p">)</span> 0<span class="p">]]</span>
      set g <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>768<span class="p">)</span> 1<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>0<span class="p">)</span> 1<span class="p">]]</span>
      set b <span class="p">[</span>expr <span class="p">(</span>1.0 - $ratio<span class="p">)</span> * <span class="p">[</span>lindex $colors<span class="p">(</span>768<span class="p">)</span> 2<span class="p">]</span> + $ratio * <span class="p">[</span>lindex $colors<span class="p">(</span>0<span class="p">)</span> 2<span class="p">]]</span>
    <span class="p">}</span>

  color change rgb <span class="p">[</span>expr $i + $color_start     <span class="p">]</span> $r $g $b
  <span class="p">}</span>
  display update on
<span class="p">}</span>
</code></pre></div></div> <p>It will be activated by using the colormap command such as <code class="language-plaintext highlighter-rouge">mol scaleminmax molID repID min max</code> once again.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/note-for-gaussian/">Tips for Gaussian</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/notes-for-python/">Notes for Python</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/notes-for-gimic/">Notes for gimic</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/notes-for-orca/">Notes for ORCA</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/notes-phy-tddft/">TDDFT theory</a> </li> <div id="giscus_thread" style="max-width: 2000px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"liangguangyii/liangguangyii.github.io","data-repo-id":"R_kgDOKwiT3g","data-category":"Announcements","data-category-id":"DIC_kwDOKwiT3s4Cdhr9","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 LIANG Guangyi. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>